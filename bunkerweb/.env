# ==========================================================
# BunkerWeb Configuration
# ==========================================================

# --- Network & Proxy Settings ---
REAL_IP_FROM=192.168.50.1
USE_REAL_IP=yes
REAL_IP_HEADER=X-Forwarded-For
USE_REVERSE_PROXY=yes
REVERSE_PROXY_URL=/
REVERSE_PROXY_HOST=http://nginx

# --- General Settings ---
TZ=Asia/Taipei
SERVER_NAME=localhost
AUTO_SERVER_NAME=yes
# BUNKERWEB_INSTANCES=bunkerweb
DISABLE_DEFAULT_SERVER=no
MAX_CLIENT_SIZE=10G
SERVE_FILES=no
ALLOWED_METHODS=GET|POST|HEAD|COPY|DELETE|LOCK|MKCOL|MOVE|PROPFIND|PROPPATCH|PUT|UNLOCK|OPTIONS
API_WHITELIST_IP=127.0.0.1 10.20.30.0/24 10.20.40.0/24

# --- HTTP & Performance ---
X_FRAME_OPTIONS=SAMEORIGIN
USE_GZIP=yes
USE_CLIENT_CACHE=yes

# --- Rate Limiting (Global) ---
USE_LIMIT_REQ=yes
LIMIT_REQ_STATUS_CODE=429
LIMIT_REQ_RATE=20r/s
LIMIT_REQ_BURST=40

# --- Security: ModSecurity & OWASP ---
USE_MODSECURITY=yes
MODSECURITY_CRS_VERSION=3
USE_OWASP_CRS=yes
# Targeted rule exclusion for phpinfo() in Phase 1
# 951240: postgres SQL Information Leakage
# 951260: Sybase SQL Information Leakage
MODSECURITY_CUSTOM_RULES_BEFORE=SecRule REQUEST_URI "@streq /" "id:10001,phase:1,pass,nolog,ctl:ruleRemoveById=951240,ctl:ruleRemoveById=951260"

# --- Security: Bot Protection ---
# Challenge mode for suspicious traffic
USE_ANTIBOT=yes
ANTIBOT_TYPE=javascript
USE_BAD_BOT=yes
BAD_BEHAVIOR_STATUS_CODES=400 401 403 405 444

# --- Security: IP Reputation & Blacklisting ---
USE_BLACKLIST=yes
# External IP blacklists including Tor exit nodes and Firehol lists
BLACKLIST_IP_URLS=https://check.torproject.org/torbulkexitlist https://raw.githubusercontent.com/firehol/blocklist-ipsets/master/firehol_level2.netset https://lists.blocklist.de/lists/all.txt http://cinsscore.com/list/ci-badguys.txt
USE_BUNKERNET=yes
USE_DNSBL=yes

SEND_ANONYMOUS_REPORT=no
DOCKER_SCHEDULER_PRO_PLUGINS=no
BUNKERNET_AUTOREGISTER=yes